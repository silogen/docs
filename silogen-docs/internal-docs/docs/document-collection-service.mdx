---
title: Document Collection Service
description: Document collection service is used to manage documents for RAG.
---

## Current State of the system

### Overview

Our system is built with multiple services to support Retrieval-Augmented Generation (RAG). The core components include:

- **Keycloak**: Provides JWT tokens to access our API, containing user permissions and accessible collections.
- **Model Service**: Provides inference capabilities and queries the Retrieval Plugin for relevant documents.
- **Retrieval Plugin**: Contains Weaviate, used for document retrieval.
- **Document Collection Service**: Manages document collections and provides APIs to add files, process zip files, and scrape websites for content indexing.

### Current Workflow

1. **Authentication**: Keycloak issues JWT tokens that include user permissions and accessible collections.
1. **Model Inference**: Model Service receives an API call, queries the Retrieval Plugin to fetch relevant documents.
1. **Document Management**: Document Collection Service handles document metadata, uploads, and indexing.

### Access Controls

Currently, both the Retrieval Plugin and Document Collection Service rely on a list of collections embedded in the JWT token to determine user access. The JWT token includes:

- Models available to the user.
- Accessible collections.
- Embedding server and collection pairs (e.g., `SiloAI##baai-bge-base-en-v1-5`).

### Databases

- MongoDB: Stores metadata for all documents, and will be expanded to include "Collection" objects.

The service will be expanded with the Growth Projects mentioned here: [2024-06-11 - Architecture Design Document Collection Improvement](https://siloai.atlassian.net/wiki/spaces/SGEN/pages/3734601757)
